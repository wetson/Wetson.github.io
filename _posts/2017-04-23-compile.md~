---
layout: post
title: 编译常识
subtitle: 
author: wetson
date: 2017-04-23 11:16:49 +0800
categories: 编译
tag: 技术
---

### 库
> 库（英语：library）是用于开发软件的子程序集合。库和可执行文件的区别是，库不是独立程序，他们是向其他程序提供服务的代码。

### 库链接
> 库链接是指把一个或多个库包含到程序中，有两种链接形式：**静态链接**和**动态链接**,相应所链接的库为静态库和动态库。

### 静态链接
> 静态链接使由连接器在链接使将库的内容加入到可执行程序中。  
> + 优点:可执行程序可以独立于库独立运行
> + 缺点:可执行文件太大，需要更多的系统资源。不利于库的共享。

### 动态链接
> 动态链接，在可执行文件装载或运行使，由操作系统的装载程序加载库。大多操作系统会解析外部引用（比如库）作为加载过程的一部分。可执行文件会包含一个叫import directory的表，该表包含每个库的各种信息，装载程序会根据这些信息从硬盘上加载这些库到内存一个预先不确定的位置，之后根据加载库的地址来更新可执行程序。从而可执行程序和库相关联。这种类型的动态加载称为装载（load-time）时加载，window和linux都采用这种。windows是 dynamic link library（DLL），在UNIX或Linux上是Shared Library。  
少数操作系统是运行使解析引用。可执行程序通过调用系统api将库信息作为参数。操作系统负责解析然后调用适合的函数这种称为运行时链接。因为每次调用库函数都是要调用系统api，对程序性能影响比较大。不常见。  
优点：多个应用可以同时使用一个库的一份拷贝。  
缺点： 可执行程序依赖库文件才能正确执行。
